# DoricProcessingTools
This repository will be used in the Nautiyal Lab for analyzing output from the Doric Fiber Photometry system.

## Background
The Doric Fiber Photometry system saves both signal and TTL data in .csv as time series data. 
These data can be analyzed in many different ways, as photometry can be applied to many different types of questions about neural activity. 
The goal of this repository is to maintain a simple, user-friendly set of tools for flexibly analyzing photometry data. 

## Usage
The central tool used in this repository is the signal_processing_object class defined within Doric_Processing_Toolbox. This class reads in 
the raw data from Doric .csv output files and performs a few initial preprocessing steps (isosbestic filtration, artifact removal, etc.). 
When this analysis code was initially written, the Doric Fiber Photometry system saved both signal and TTL data in a single .csv. 
However, as of v6 of that software, all data are exported from the default .doric into individual files for each datatype (1 for each signal, and one for all TTLs). The purpose of the multi_file_input branch is to incorporate handling of both single and multi-file inputs in a single function. 

The class also contains various methods that I commonly use during analysis (e.g. dff calculation, TTL alignment, etc.). Further, the Toolbox 
contains a set of utility functions that I found helpful to have outside of the class. 

## User Caveats
When reading in single .csv files generated by Doric Neuroscience Studio v5, the initial assignment of which hardware inputs corresponds to which channels (excitation vs. isosbestic) is hardcoded.
Not only are these based on the kind of experiment that I'm running (1 excitation signal, 1 isosbestic for 1 fluorophore),
but also they are based on how I have my hardward set up. They should be verified/altered for the user's particular case. 

With multiple input files, as provided by DNS v6, the signal identity is user-defined. However, this script is still hardcoded for handling
one 1 excitation and 1 isosbestic.  

## Version control
A CHANGELOG is included at the top of the main file, Doric_Processing_Toolbox.py. The version will be updated according to common python practices 
and is also incorporated into the signal_processing_object class, thereby allowing the version of pickled objects to be recorded. 
All writing and debugging have occurred in python3.8. 
